webpackJsonp([0],[,,function(e,n,t){e.exports=t.p+"img/ice1.png"},function(e,n,t){e.exports=t.p+"img/ice2.png"},function(e,n,t){e.exports=t.p+"img/ice3.png"},function(e,n,t){e.exports=t.p+"img/ice4.png"},function(e,n,t){e.exports=t.p+"img/ice5.png"},function(e,n,t){t(8),t(19),t(20),e.exports=t(21)},function(e,n,t){"use strict";function o(){function e(e,n,t,o){return D.rectangle(e,n,80,89,{label:t,chamfer:null,render:{fillStyle:"transparent",sprite:{texture:o,xScale:.245,yScale:.247}}})}function n(e){if(R){var n=window.orientation,t=R.world.gravity;0===n?(t.x=E.clamp(e.gamma,-90,90)/90,t.y=E.clamp(e.beta,-90,90)/90):180===n?(t.x=E.clamp(e.gamma,-90,90)/90,t.y=E.clamp(-e.beta,-90,90)/90):90===n?(t.x=E.clamp(e.beta,-90,90)/90,t.y=E.clamp(-e.gamma,-90,90)/90):-90===n&&(t.x=E.clamp(-e.beta,-90,90)/90,t.y=E.clamp(e.gamma,-90,90)/90)}}var o,a,r=61,l=JSON.parse(localStorage.getItem("user_info")),d=function(){if(l){var e={event:"join",data:l};o.send(JSON.stringify(e))}},u=function(e){var n={event:"rock",data:e};o.send(JSON.stringify(n))},p=function(e){var n=document.getElementById("tips"),t=document.getElementById("tipsContent");document.querySelector("body").addEventListener("touchmove",function(e){e.preventDefault()},!1),n.style.display="block",t.innerHTML=e,setTimeout(function(){n.style.display="none"},1e3)},m=function(e,n,t){var o=document.getElementById("shade"),i=document.getElementById("maskContent"),a=document.getElementById("sure"),r=document.querySelector("body");o.style.display="flex",i.innerHTML=e,a.innerText=t,r.addEventListener("touchmove",function(e){e.preventDefault()},!1),a.addEventListener("click",function(){o.style.display="none",n&&window.location.replace(window.location.href)})},f=function(e,n){1===n.status?(p(n.message),C.add(L,j),g()):0===n.status&&(e&&e.close(),m(n.message,!0,"重新加入"))},g=function(){var e=document.getElementById("time"),n={event:"time_end",data:{openid:s}};a=setInterval(function(){r--,0==r&&(window.clearInterval(a),o.send(JSON.stringify(n)),C.clear(L),x.clear(R),p("游戏已结束！")),e.innerHTML=r+"s"},1e3)},w=!1,y=function(e,n){w=!0,C.clear(L),x.clear(R);var t=c.find(n.data,function(e){return e.openid==s});e.close(),t&&(p("游戏已结束！"),document.getElementById("sure").style.display="none",setTimeout(function(){m("谢谢您的参与!<br/>您的游戏得分是："+t.scores+"分",!1,""),0!=r&&window.clearInterval(a)},2e3))},v=function(e,n){s==n.data.openid&&(e.close(),document.getElementById("sure").style.display="none",setTimeout(function(){m("谢谢您的参与!<br/>您的游戏得分是："+n.data.scores+"分",!1,"")},1e3))},h=function(e,n){e.close()};o=function(){o&&(o.onerror=o.onopen=o.onclose=null,o.close());var e=window.location.host;return console.log("wspath: ",e),o=new window.WebSocket("ws://"+e+"/icesocket/","mobile",{perMessageDeflate:!1})}(),o.onerror=function(){console.log("onerror-----请等待游戏开始"),m("请等待游戏开始",!1,"确定")},o.onopen=function(){d()},o.onclose=function(){console.log("onclose---"),0==r||w||(console.log("resetFlag: ",w),console.log("num: ",r),window.clearInterval(a),C.clear(L),x.clear(R),document.getElementById("sure").style.display="none",m("游戏已结束！",!1,""))},o.onmessage=function(e){switch(e=JSON.parse(e.data),e.event){case"join_status":f(o,e);break;case"reset":y(o,e);break;case"time_end_result":v(o,e);break;case"all_screen_closed":h(o)}};var x=i.Engine,b=i.Render,S=i.Runner,I=i.Events,M=i.Composite,k=i.Composites,E=i.Common,_=i.MouseConstraint,B=i.Mouse,C=i.World,D=(i.Body,i.Bodies),R=x.create(),L=(R.composite,R.world),O=document.documentElement.clientWidth,T=document.documentElement.clientHeight,N=b.create({element:document.getElementById("mainContainer"),engine:R,options:{width:O,height:T,wireframes:!1,showAngleIndicator:!0,background:"transparent"}});b.run(N);var V=S.create();S.run(V,R);var W={isStatic:!0,render:{fillStyle:"transparent"}},A=D.rectangle(O/2+100,-70,O+200,1,{isSensor:!0,isStatic:!0,render:{fillStyle:"transparent"}}),j=k.stack(50,150,3,2,0,0,function(n,o){switch(Math.floor(5*E.random(0,1))){case 0:return e(n,o,"white",t(2));case 1:return e(n,o,"blue",t(3));case 2:return e(n,o,"red",t(4));case 3:return e(n,o,"yellow",t(5));default:return e(n,o,"green",t(6))}});C.add(L,[A,D.rectangle(O/2,-400,O+.5,200,W),D.rectangle(O/2,T+94,O+.5,210,W),D.rectangle(O+94,T/2,200,T+800.5,W),D.rectangle(-94,T/2,200,T+800.5,W)]);var J={},U=[],P={};I.on(R,"collisionStart",function(e){for(var n=e.pairs,o=0,i=n.length;o!=i;++o){var a=n[o];a.bodyA===A&&(a.bodyB.id&&(U.push(a.bodyB.id),J=a.bodyB,P={label:a.bodyB.label,velocity:a.bodyB.velocity,position:a.bodyB.position,speed:a.bodyB.speed,sceneWidth:O},M.remove(j,J,!1)),u({openid:l.openid,ice:P}))}if(j.bodies.length<=1)for(var r=0;r<6;r++){var c=["white","blue","red","yellow","green"],s=D.rectangle(45*(r+1),45*(r+1),80,89,{label:c[r%5],render:{fillStyle:"transparent",sprite:{texture:t(18)("./ice"+(r%5+1)+".png"),xScale:.245,yScale:.247}}});j.bodies.push(s)}}),window.addEventListener("deviceorientation",n,!0);var H=B.create(N.canvas),Q=_.create(R,{mouse:H,constraint:{stiffness:.2,render:{visible:!1}}});return C.add(L,Q),N.mouse=H,b.lookAt(N,{min:{x:0,y:0},max:{x:O,y:T}}),{engine:R,runner:V,render:N,canvas:N.canvas,stop:function(){i.Render.stop(N),i.Runner.stop(V),window.removeEventListener("deviceorientation",n)}}}Object.defineProperty(n,"__esModule",{value:!0});var i=t(9),a=t(0),r=t(15),c=t(17),s=function(e){var n=window.location.search.match(new RegExp("(\\?|#|&)"+e+"=([^&]*)(#|&|$)"));return n||(n=window.location.hash.match(new RegExp("(#|&)"+e+"=([^&#]*)(#|&|$)"))),n?decodeURIComponent(n[2]):""}("openid");if(s){var l=a.get("http://h5.baleina.cn/api/login/weixin?openid="+s);l.timeout(1e4),l.end(function(e,n){e||!n||n.body.error?alert("获取用户信息失败"):(localStorage.setItem("user_info",JSON.stringify(n.body)),o())})}else r.signature(function(){var e=encodeURIComponent(window.location.href);window.location.href="http://cod.baleina.cn?callback="+e+"&client=klz"})},function(e,n){e.exports=Matter},,,,,,function(e,n,t){"use strict";(function(e){function o(e){var n=a.post("http://cod.baleina.cn/wx/jsconfig");n.timeout(1e4),n.send({url:window.location.href.split("#")[0],client:"klz"}).end(function(n,t){i(t.body,e)})}function i(n,t){wx.config({debug:!1,appId:n.appId,timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"]}),wx.ready(function(){e.signature=!0,t&&t(),e.changeWx()}),wx.error(function(){e.signature=!1})}Object.defineProperty(n,"__esModule",{value:!0});var a=t(0);n.signature=o,e._wxData={wxtitle:"",wxlink:"",wxdesc:"",wximgUrl:""},e.changeWx=function(){wx.onMenuShareAppMessage({title:e._wxData.wxtitle,desc:e._wxData.wxdesc,link:e._wxData.wxlink,imgUrl:e._wxData.wximgUrl,trigger:function(){},success:function(){window.shareSuccess&&window.shareSuccess()},cancel:function(){},fail:function(){}}),wx.onMenuShareTimeline({title:e._wxData.wxtitle+"，"+e._wxData.wxdesc,link:e._wxData.wxlink,imgUrl:e._wxData.wximgUrl,trigger:function(){},success:function(){window.shareSuccess&&window.shareSuccess()},cancel:function(){},fail:function(){}})}}).call(n,t(16))},,function(e,n){e.exports=_},function(e,n,t){function o(e){return t(i(e))}function i(e){var n=a[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var a={"./ice1.png":2,"./ice2.png":3,"./ice3.png":4,"./ice4.png":5,"./ice5.png":6};o.keys=function(){return Object.keys(a)},o.resolve=i,e.exports=o,o.id=18},function(e,n){},function(e,n){},function(e,n){}],[7]);